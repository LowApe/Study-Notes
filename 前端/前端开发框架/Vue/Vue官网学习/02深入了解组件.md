# æ·±å…¥äº†è§£ç»„ä»¶

# ç»„ä»¶æ³¨å†Œ

## ç»„ä»¶å

åœ¨æ³¨å†Œä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å§‹ç»ˆéœ€è¦ç»™å®ƒä¸€ä¸ªåå­—ã€‚æ¯”å¦‚åœ¨å…¨å±€æ³¨å†Œçš„æ—¶å€™æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ï¼š

```js
Vue.component('my-component-name',{ /* ... */})
```

è¯¥ç»„ä»¶åå°±æ˜¯Vue.component çš„ç¬¬ä¸€ä¸ªå‚æ•°

- è‡ªå®šä¹‰ç»„ä»¶åï¼Œå­—æ¯å…¨å°å†™ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ªè¿å­—ç¬¦ï¼Œä¾‹å¦‚ï¼š`my-component-name`,å¼•ç”¨ <my-component-name>
- æˆ–è€…ä½¿ç”¨ PascalCase ï¼Œé¦–å­—æ¯å¤§å†™å‘½ä»¤ ä¾‹å¦‚ï¼š`MyComponentName`ï¼Œå¼•ç”¨ä¸¤ç§éƒ½å¯ä»¥

## å…¨å±€æ³¨å†Œ



## å±€éƒ¨æ³¨å†Œ

> å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªåƒ webpack è¿™æ ·çš„æ„å»ºç³»ç»Ÿï¼Œå…¨å±€æ³¨å†Œæ‰€æœ‰çš„ç»„ä»¶æ„å‘³ç€å³ä¾¿ä½ å·²ç»ä¸å†ä½¿ç”¨ä¸€ä¸ªç»„ä»¶äº†ï¼Œå®ƒä»ç„¶è¢«åŒ…å«åœ¨ä½ æœ€ç»ˆçš„æ„å»ºç»“æœä¸­ã€‚

```vue
<script>
    // ä½¿ç”¨æ™®é€šçš„ JS å¯¹è±¡æ¥å®šä¹‰ç»„ä»¶
	var ComponentA = { /* ... */}
    var ComponentB = { /* ... */}
    var ComponentC = { /* ... */}
    // ç„¶ååœ¨ components é€‰é¡¹ä¸­å®šä¹‰ä½ æƒ³è¦ä½¿ç”¨çš„ç»„ä»¶
   	new Vue({
        el: '#app',
        components: {
            'components-a': ComponentA,
            'components-b': ComponentB
		}
    })
</script>
```

æ³¨æ„å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶åœ¨å…¶å­ç»„ä»¶ä¸­ä¸å¯ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å¸Œæœ› `ComponentA`åœ¨`ComponentB`ä¸­å¯ç”¨ï¼Œåˆ™ä½ éœ€è¦è¿™æ ·å†™ï¼š

```js
var ComponentA = { /* ... */}

var ComponentB = {
    components:{
        'component-a':ComponentA
    },
    // ...
}
```

æˆ–è€…å¦‚æœä½ é€šè¿‡ Babel å’Œ webpack ä½¿ç”¨ ES2015 æ¨¡å—ï¼Œé‚£ä¹ˆä»£ç çœ‹èµ·æ¥æ›´åƒï¼š

```js
import ComponentA from './ComponentA.vue'
export default {
    components:{
        ComponentA
    },
    // ...
}
```

`ComponentA`çš„å˜é‡åå…¶å®æ˜¯ `ComponentA:ComponentA`çš„ç¼©å†™ï¼Œå³å˜é‡ååŒæ—¶æ˜¯ï¼š

- ç”¨åœ¨æ¨¡ç‰ˆä¸­çš„è‡ªå®šä¹‰å…ƒç´ çš„åç§°
- åŒ…å«äº†è¿™ä¸ªç»„ä»¶é€‰é¡¹çš„å˜é‡å

## æ¨¡å—ç³»ç»Ÿ

### åœ¨æ¨¡å—ç³»ç»Ÿä¸­å±€éƒ¨æ³¨å†Œ

ä½¿ç”¨äº† Babel å’Œ webpack çš„æ¨¡å—ç³»ç»Ÿã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èåˆ›å»ºä¸€ä¸ª `components`ç›®å½•ï¼Œå¹¶å°†æ¯ä¸ªç»„ä»¶æ”¾ç½®åœ¨å…¶å„è‡ªçš„æ–‡ä»¶ä¸­ã€‚ç„¶åä½ éœ€è¦åœ¨å±€éƒ¨æ³¨å†Œä¹‹å‰å¯¼å…¥æ¯ä¸ªä½ æƒ³ä½¿ç”¨çš„ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå‡è®¾çš„ `ComponentB.js`æˆ–`ComponentB.vue`æ–‡ä»¶ä¸­:

```js
import ComponentA from './ComponentA'
import ComponentC from './ComponentC'

export default {
    components: {
        ComponentA,
        ComponentC
    },
    // ...
}
```

ç°åœ¨ `ComponentA`å’Œ `ComponentC`éƒ½å¯ä»¥åœ¨ `ComponentB`çš„æ¨¡ç‰ˆä¸­ä½¿ç”¨äº†ã€‚

### åŸºç¡€ç»„ä»¶çš„è‡ªåŠ¨åŒ–å…¨å±€æ³¨å†Œ

ä½ çš„è®¸å¤šç»„ä»¶**åªæ˜¯åŒ…è£¹äº†ä¸€ä¸ªè¾“å…¥æ¡†æˆ–æŒ‰é’®ä¹‹ç±»çš„å…ƒç´ **ï¼Œæ˜¯ç›¸å¯¹é€šç”¨çš„ã€‚æˆ‘ä»¬ç§°ä¸º`åŸºç¡€ç»„ä»¶`ï¼Œè¿™äº›ç»„ä»¶æ˜¯é¢‘ç¹è¢«ç”¨åˆ°ã€‚

```js
import BaseButton from './BaseButton.vue'
import BaseIcon form './BaseIcon.vue'
import BaseInput from './BasesInput.vue'

export default {
    components: {
        BaseButton,
        BaseIcon,
        BaseInput
    }
}

```

```html
<BaseInput
   v-model="searchText"
   @keydown.enter="search"
           />
<BaseButton @click="search">
    <BaseIcon name="search" />
</BaseButton>
```

ä½ æ°å¥½ä½¿ç”¨äº† webpackï¼ˆæˆ–åœ¨å†…éƒ¨ä½¿ç”¨äº† webpack çš„ Vue CLI 3+ï¼‰ï¼Œ**é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ `require.context `åªå…¨å±€æ³¨å†Œè¿™äº›è¿™äº›éå¸¸é€šç”¨çš„åŸºç¡€ç»„ä»¶**ã€‚**è¿™é‡Œæœ‰ä¸€ä»½å¯ä»¥è®©ä½ åœ¨åº”ç”¨å…¥å£æ–‡ä»¶(æ¯”å¦‚`src/main.js`)**ä¸­å…¨å±€å¯¼å…¥åŸºç¡€ç»„ä»¶çš„ç¤ºä¾‹ä»£ç :

```js
import Vue from 'vue'
import upperFirst from 'lodash/upperFirst'
import camelCase from 'lodash/camelCase'

const requireComponent = require.context(
	// å…¶ç»„ä»¶ç›®å½•çš„ç›¸å¯¹
    './components',
    // æ˜¯å¦æŸ¥è¯¢å…¶å­ç›®å½•
    false,
    // åŒ¹é…åŸºç¡€ç»„ä»¶æ–‡ä»¶åçš„æ­£åˆ™è¡¨è¾¾å¼
    /Base[A-Z]\w+\.(vue|js)$/
)

requireComponent.keys().forEach(fileName=>{
    // è·å–ç»„ä»¶é…ç½®
    const componentConfig = requireComponent(fileName)
    
    // è·å–ç»„ä»¶çš„ PascalCase å‘½å
    const componentName = upperFirst(
        camelCase(
        	// è·å–å’Œç›®å½•æ·±åº¦æ— å…³çš„æ–‡ä»¶å
            fileName
            .split('/')
            .pop()
            .replace(/\.\w+$/,'')
        )
    )
    // å…¨å±€æ³¨å†Œç»„ä»¶
    Vue.component(
    	componentName,
        // å¦‚æœè¿™ä¸ªç»„ä»¶é€‰é¡¹æ˜¯é€šè¿‡ export default å¯¼å‡ºçš„ï¼Œ
        // é‚£ä¹ˆå°±ä¼šä¼˜å…ˆä½¿ç”¨ default 
        // å¦åˆ™å›é€€åˆ°ä½¿ç”¨æ¨¡å—çš„æ ¹
        componentConfig.default || componentConfig
    )
})
```

è®°ä½å…¨å±€æ³¨å†Œçš„è¡Œä¸ºå¿…é¡»åœ¨æ ¹ Vue å®ä¾‹(é€šè¿‡ `new Vue`)åˆ›å»ºä¹‹å‰å‘ç”Ÿ

# Prop

## Prop çš„å¤§å°å†™(camelCase vs kebab-case)

HTML ä¸­çš„ `attribute`åæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼Œæ‰€ä»¥æ¸¸è§ˆå™¨ä¼šæŠŠæ‰€æœ‰å¤§å†™å­—ç¬¦è§£é‡Šä¸ºå°å†™å­—ç¬¦ã€‚è¿™æ„å‘³ç€å½“ä½ ä½¿ç”¨ DOM ä¸­çš„æ¨¡ç‰ˆæ—¶ï¼Œ camelCase çš„ prop åéœ€è¦ä½¿ç”¨å…¶ç­‰ä»·çš„ kebab-case å‘½å

```js
Vue.component('blog-post',{
    // åœ¨ JavaScript ä¸­æ˜¯ camelCase çš„
    props: ['postTitile'],
    template:'<h3>{{ postTitle }}</h3>'
})
```

```html
<blog-post post-title="hello!"></blog-post>
```

## Prop ç±»å‹

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åªçœ‹åˆ°äº†å­—ç¬¦ä¸²æ•°ç»„å½¢å¼åˆ—è¡¨çš„ prop:

```js
props: ['title','likes','isPublished','commentIds','author']
```

é€šå¸¸ä½ å¸Œæœ›**æ¯ä¸ª prop éƒ½æœ‰æŒ‡å®šçš„å€¼ç±»å‹**ã€‚è¿™æ—¶ï¼Œä½ å¯ä»¥ä»¥å¯¹è±¡å½¢å¼åˆ—å‡º prop,è¿™äº› property çš„åç§°å’Œå€¼åˆ†åˆ«æ˜¯ prop å„è‡ªçš„**åç§°å’Œç±»å‹**ï¼š

```js
props: {
    title: String,
    likes: Number,
    isPublised: Boolean,
    commentIds: Array,
    author: Object,
    callback: Function,
    contactsPromise: Promise
}
```

> è¿™ä¸ä»…ä¸ºä½ çš„ç»„ä»¶æä¾›äº†æ–‡æ¡£ï¼Œè¿˜ä¼šåœ¨å®ƒä»¬é‡åˆ°é”™è¯¯çš„ç±»å‹æ—¶ä»æ¸¸è§ˆå™¨çš„ JavaScript æ§åˆ¶å°æç¤ºç”¨æˆ·ã€‚

## ä¼ é€’é™æ€æˆ–åŠ¨æ€ Prop

```html
<!-- ä½ å·²ç»é€šè¿‡äº† prop ä¼ å…¥ä¸€ä¸ªé™æ€çš„å€¼ï¼š -->
<blog-post title="My journey with Vue"></blog-post>

<!-- å¯ä»¥é€šè¿‡ v-bind åŠ¨æ€èµ‹å€¼ -->
<blog-post v-bind:title="post.title"></blog-post>

<!-- å¯ä»¥é€šè¿‡ v-bind åŠ¨æ€èµ‹å€¼ä¸€ä¸ªå¤æ‚è¡¨è¾¾å¼çš„å€¼ -->
<blog-post v-bind:title="post.title + 'by' + post.author.name"></blog-post>
```

åœ¨ä¸Šè¿°ä¸¤ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼Œ**ä½†å®é™…ä¸Šä»»ä½•ç±»å‹çš„å€¼**éƒ½å¯ä»¥ä¼ ç»™ä¸€ä¸ª prop

### ä¼ é€’çš„ç±»å‹

```html
<!-- ä¼ å…¥ä¸€ä¸ªæ•°å­— -->
<blog-post v-bind:likes="42"></blog-post>

<!-- ä¼ å…¥ä¸€ä¸ªå¸ƒå°”å€¼ -->
<blog-post is-published></blog-post>
<blog-post v-bind:is-published="false" ></blog-post>
<blog-post v-bind:is-published="post.isPublished" ></blog-post>

<!-- ä¼ å…¥ä¸€ä¸ªæ•°ç»„ -->
<blog-post v-bind:comment-ids="[234, 266, 273]"></blog-post>
<blog-post v-bind:comment-ids="post.commentIds"></blog-post>

<!-- ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ -->
<blog-post
  v-bind:author="{
    name: 'Veronica',
    company: 'Veridian Dynamics'
  }"
></blog-post>
<!-- ä¼ å…¥ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ property -->
<!-- å¦‚æœä½ æƒ³è¦å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ property éƒ½ä½œä¸º prop ä¼ å…¥ï¼Œ
ä½ å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ v-bind ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„å¯¹è±¡ post -->
<blog-post v-bind="post"></blog-post>


```

## å•å‘æ•°æ®æµ

æ‰€æœ‰çš„ prop éƒ½ä½¿å¾—å…¶çˆ¶å­ prop ä¹‹é—´å½¢æˆä¸€ä¸ª**å•å‘ä¸‹è¡Œç»‘å®š**ï¼šçˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚**è¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–å˜æ›´çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£**ã€‚æ„å‘³ç€ **ä½ ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜ prop**å¦‚æœä½ è¿™æ ·åšäº†ï¼ŒVue ä¼šåœ¨æ¸¸è§ˆå™¨çš„æ§åˆ¶å°å‘å‡ºè­¦å‘Šï¼š



## Prop éªŒè¯

æˆ‘ä»¬å¯ä»¥ä¸ºç»„ä»¶çš„ prop æŒ‡å®šéªŒè¯è¦æ±‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªéœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œåˆ™ Vue ä¼šåœ¨æ¸¸è§ˆå™¨æ§åˆ¶å°ä¸­è­¦å‘Šä½ 

```js
Vue.component('my-component',{
    props:{
        // åŸºç¡€çš„ç±»å‹æ£€æŸ¥(null å’Œ undefined ä¼šé€šè¿‡ä»»ä½•ç±»å‹éªŒè¯)
        propAï¼šNumber,
        // å¤šä¸ªå¯èƒ½çš„ç±»å‹
        propB: [String,Number],
    	// å¿…å¡«çš„å­—ç¬¦ä¸²
    	propC:{
            type:String,
            required:true
        },
        // å¸¦æœ‰é»˜è®¤å€¼çš„æ•°å­—
        propD:{
            type: Number,
            default: 100
        },
        // å¸¦æœ‰é»˜è®¤å€¼çš„å¯¹è±¡
        propE: {
            type: Object,
            // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å–ğŸ¤”
            default: function(){
                return { message: 'hello' }
            }
        },
        // è‡ªå®šä¹‰éªŒè¯å‡½æ•° ğŸŒŸ
        propE: {
            validator: function(value){
                // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²çš„ä¸€ä¸ª
                return ['success','warning','danger'].indexOf(value) !== -1
            }
        }
    }
})
```

> æ³¨æ„å“ªäº› prop ä¼šåœ¨ä¸€ä¸ªç»„ä»¶å®ä¾‹åˆ›å»ºä¹‹å‰è¿›è¡ŒéªŒè¯ï¼Œæ‰€ä»¥å®ä¾‹çš„ property(å¦‚ `data`ã€`computed`ç­‰)åœ¨ `default`æˆ–`validator`å‡½æ•°ä¸­æ˜¯ä¸å¯ç”¨çš„

**ç±»å‹æ£€æŸ¥**

`type` å¯ä»¥æ˜¯ä¸‹åˆ—åŸå£°æ„é€ å‡½æ•°ä¸­çš„ä¸€ä¸ª:

- String
- Number
- Boolean
- Array
- Object
- Date
- Function
- Symbol

é¢å¤–çš„,`type`è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”é€šè¿‡`instacneof`æ¥è¿›è¡Œæ£€æŸ¥ç¡®è®¤ã€‚

```js
function Person (firstName,lastName) {
    this.firstName = firstName
    this.lastName = lastName
}
```

ä½ å¯ä»¥ä½¿ç”¨ï¼š

```js
Vue.component('blog-post',{
	props: {
		author: Person
	}
})
```

æ¥éªŒè¯ `author` prop çš„å€¼æ˜¯å¦é€šè¿‡ `new Person`åˆ›å»ºçš„

## é Prop çš„ Attribute

ä¸€ä¸ªé Prop çš„ Attribute æ˜¯æŒ‡å‘ä¸€ä¸ªç»„ä»¶çš„ï¼Œä½†æ˜¯è¯¥ç»„ä»¶å¹¶æ²¡æœ‰ç›¸åº” prop å®šä¹‰çš„ attributeã€‚å› ä¸ºç»„ä»¶åº“ä½œè€…å¹¶ä¸èƒ½é‡è§ç»„ä»¶ä¼šè¢«ç”¨äºæ€æ ·çš„åœºæ™¯ã€‚æ‰€ä»¥ç»„ä»¶å¯ä»¥æ¥å—ä»»æ„çš„ attribute ã€‚



### æ›¿æ¢/åˆå¹¶å·²æœ‰çš„ Attribute

å¦‚æœ `BootStrap` ç¬¬ä¸‰æ–¹æœ‰ä¸ª`<bootstrap-date-input>`ç»„ä»¶ï¼Œå¦‚æœæ¨¡ç‰ˆæ˜¯è¿™æ ·çš„ï¼š

```html
<input type="date" class="form-control">
```

ä¸ºäº†ç»™æ—¥æœŸé€‰æ‹©å™¨æ’ä»¶å®šåˆ¶äº†ä¸€ä¸ªä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥èƒ½éœ€è¦åƒè¿™æ ·æ·»åŠ ä¸€ä¸ªç‰¹åˆ«çš„ç±»åï¼š

```html
<bootstrap-date-input
  data-date-picker="activated"
  class="date-picker-theme-dark"
></bootstrap-date-input>
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªä¸åŒçš„ `class`çš„å€¼ï¼š

- `form-control`,è¿™æ˜¯åœ¨ç»„ä»¶çš„æ¨¡ç‰ˆå†…è®¾ç½®å¥½çš„
- `date-picker-theme-dark`,è¿™æ˜¯ä»ç»„ä»¶çš„çˆ¶çº§ä¼ å…¥çš„

> å¯¹äºç»å¤§å¤šæ•° attribute æ¥è¯´ï¼Œä»å¤–éƒ¨æä¾›ç»™ç»„ä»¶çš„å€¼ä¼šæ›¿æ¢æ‰ç»„ä»¶å†…éƒ¨è®¾ç½®å¥½çš„å€¼ã€‚å¦‚æœä¼ å…¥ `type="text"`å°±ä¼šæ›¿æ¢æ‰`type="date"`å¹¶æŠŠå®ƒç ´åï¼**`class`å’Œ`style`attibuteä¼šç¨å¾®æ™ºèƒ½ä¸€äº›ï¼Œå³ä¸¤è¾¹çš„å€¼ä¼šè¢«åˆå¹¶èµ·æ¥ï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆçš„å€¼ï¼š`form-control date-picker-theme-dark`** 

### ç¦ç”¨ Attribute ç»§æ‰¿

å¦‚æœä½ ä¸å¸Œæœ›ç»„ä»¶çš„æ ¹å…ƒç´ ç»§æ‰¿ `attribute`,ä½ å¯ä»¥åœ¨ç»„ä»¶çš„é€‰é¡¹ä¸­è®¾ç½®`inheritAttrs:false`ä¾‹å¦‚ï¼š

```js
Vue.component('my-component',{
    inheritAttrs: false,
})
```

è¿™å°¤å…¶é€‚åˆé…åˆå®ä¾‹çš„ `$attrs` property ä½¿ç”¨ï¼Œè¯¥ property åŒ…å«äº†ä¼ é€’ç»™ä¸€ä¸ªç»„ä»¶çš„ attribute åå’Œ attribute å€¼ï¼Œä¾‹å¦‚:

```js
{
    required: true,
    placeholder: 'Enter your username'
}
```

æœ‰äº† `inheritAttrs: false` å’Œ `$attrs`,ä½ å°±å¯ä»¥æ‰‹åŠ¨å†³å®šè¿™äº› attribute ä¼šè¢«èµ‹äºˆå“ªä¸ªå…ƒç´ ã€‚

```js
Vue.component('base-input',{
    inheritAttrs:false,
    props: ['label','value'],
    template:
    `
	<label>
		{{ label }}
		<input v-bind="$attrs" v-bind:value="value" 
			v-on:input="$emit('input',$event.target.value)">
	</label>
	`
})
```

> æ³¨æ„ `inheritAttrs:false`é€‰é¡¹ä¸ä¼šå½±å“ `style`å’Œ`class`çš„ç»‘å®š

è¿™ä¸ªæ¨¡å¼å…è®¸ä½ åœ¨ä½¿ç”¨åŸºç¡€ç»„ä»¶çš„æ—¶å€™æ›´åƒæ˜¯ä½¿ç”¨åŸå§‹çš„ HTML å…ƒç´ ï¼Œè€Œä¸ä¼šæ‹…å¿ƒå“ªä¸ªå…ƒç´ æ˜¯çœŸæ­£çš„æ ¹å…ƒç´ ï¼š

```html
<base-input 
   v-model="username"
   required
   placeholder="Enter your username"
            ></base-input>
```

# è‡ªå®šä¹‰äº‹ä»¶

## äº‹ä»¶å

ä¸åŒäºç»„ä»¶çš„ propï¼Œ**äº‹ä»¶åä¸å­˜åœ¨ä»»ä½•è‡ªåŠ¨åŒ–çš„å¤§å°å†™è½¬æ¢ã€‚è€Œæ˜¯è§¦å‘çš„äº‹ä»¶åéœ€è¦å®Œå…¨åŒ¹é…ç›‘å¬è¿™ä¸ªäº‹ä»¶æ‰€ç”¨çš„åç§°**

```js
this.$emit('myEvent')
```

åˆ™ç›‘å¬è¿™ä¸ªåå­—çš„ kebab-case ç‰ˆæœ¬æ˜¯ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœçš„:

```html
<!-- æ²¡æœ‰æ•ˆæœ -->
<my-component v-on:my-event="doSomething"></my-component>
```

ä¸åŒäºç»„ä»¶å’Œ `prop`ï¼Œäº‹ä»¶åä¸ä¼šè¢«ç”¨ä½œä¸€ä¸ª JavaScript å˜é‡åæˆ– property åï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç†ç”±ä½¿ç”¨ camelCase æˆ– PascalCase äº†ã€‚**å¹¶ä¸” `v-on` äº‹ä»¶ç›‘å¬å™¨åœ¨ DOM æ¨¡ç‰ˆä¸­ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå…¨å°å†™(å› ä¸º HTML æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„)ï¼Œæ‰€ä»¥`v-on:myEvent`å°†ä¼šå˜æˆ `v-on:myevent`å¯¼è‡´ `myEvent` ä¸å¯èƒ½è¢«ç›‘å¬åˆ°**

ğŸŒŸï¼šæ¨èå§‹ç»ˆä½¿ç”¨ kebab-case çš„äº‹ä»¶å



## è‡ªå®šä¹‰ç»„ä»¶çš„ v-model

ä¸€ä¸ªç»„ä»¶ä¸Šçš„ `v-model`é»˜è®¤ä¼šåˆ©ç”¨åä¸º `value` çš„ prop å’Œåä¸º `input`çš„äº‹ä»¶ï¼Œä½†æ˜¯åƒå•é€‰æ¡†ã€å¤é€‰æ¡†ç­‰ç±»å‹çš„è¾“å…¥æ§ä»¶**å¯èƒ½ä¼šå°† `value` attribute ç”¨äºä¸åŒçš„ç›®çš„ã€‚`model`é€‰é¡¹å¯ä»¥ç”¨æ¥é¿å…è¿™æ ·çš„å†²çªï¼š**

```JS
Vue.component('base-checkbox',{
    model:{
        prop:'checked',
        event:'change'
    },
    props: {
        checked: Boolean
    }
    template: `
		<input
			type="checkbox"
			v-bind:checked="checked"
			v-on:change="$emit('change',$event.target.checked)"
	`
})
```

è¿™é‡Œçš„ `lovingVue`çš„å€¼å°†ä¼šä¼ å…¥è¿™ä¸ªåä¸º `checked`çš„prop åŒæ—¶å½“ `<base-checkbox>`è§¦å‘ä¸€ä¸ª `change` äº‹ä»¶å¹¶é™„å¸¦ä¸€ä¸ªæ–°çš„å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ª `lovingVue`çš„ propertyå°†ä¼šè¢«æ›´æ–°

## å°†åŸå£°äº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶

ä½ å¯èƒ½æœ‰å¾ˆå¤šæ¬¡æƒ³è¦åœ¨ä¸€ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šç›´æ¥ç›‘å¬ä¸€ä¸ªåŸå£°äº‹ä»¶ã€‚è¿™æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ `v-on`çš„ `.native`ä¿®é¥°ç¬¦:

```html
<base-input v-on:focus.native="onFocus"></base-input>
```

ä¸è¿‡åœ¨ä½ å°è¯•ç›‘å¬ä¸€ä¸ªç±»ä¼¼ `<input>`çš„éå¸¸ç‰¹å®šçš„å…ƒç´ æ—¶ï¼Œè¿™å¹¶ä¸æ˜¯ä¸ªå¥½ä¸»æ„.ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVue æä¾›äº†ä¸€ä¸ª `$listeners` property,å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†ä½œç”¨åœ¨è¿™ä¸ªç»„ä»¶ä¸Šçš„æ‰€æœ‰ç›‘å¬å™¨ã€‚

```js
{
    focus: function (event){ /* ... */}
    input: function (value){ /* ... */}
}
```

æœ‰äº†è¿™ä¸ª `$listeners` propertyï¼Œä½ å°±å¯ä»¥é…åˆ `v-on="$listeners"`å°†æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬æŒ‡å‘è¿™ä¸ªç»„ä»¶çš„æŸä¸ªç‰¹å®šå­å…ƒç´ ã€‚**å¯¹äºç±»ä¼¼`<input>`çš„ä½ å¸Œæœ›å®ƒä¹Ÿå¯ä»¥é…åˆ `v-model`å·¥ä½œçš„ç»„ä»¶**

```js
Vue.component('base-input',{
    inheritAttrs: false,
    props: ['label','value'],
    computed: {
        inputListeners: function(){
            var vm = this
            // Object.assign å°†ä¼šæ‰€æœ‰çš„å¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªæ–°å¯¹è±¡
            return Object.assign({},
            // æˆ‘ä»¬ä»çˆ¶çº§æ·»åŠ æ‰€æœ‰çš„ç›‘å¬å™¨
               this.$listeners,
            // ç„¶åæˆ‘ä»¬æ·»åŠ è‡ªå®šä¹‰ç›‘å¬å™¨ï¼Œ
            // æˆ–è¦†å†™ä¸€äº›ç›‘å¬å™¨çš„è¡Œä¸º
            {
                // ç¡®ä¿ç»„ä»¶é…åˆ v-model çš„å·¥ä½œ
                input: function(event){
                    vm.$emit('input', event.target.value)
                }
            }
                                )
        }
    },
    template: `
		<label>
			{{ label }}
			<input
				v-bind="$attrs"
				v-bind:value="value"
				v-on="inputListeners"
		</label>
	`
})
```

ç°åœ¨ `<base-input>`ç»„ä»¶æ˜¯ä¸€ä¸ªå®Œå…¨é€æ˜çš„åŒ…è£¹å™¨ï¼šæ‰€æœ‰è·Ÿå®ƒç›¸åŒçš„ attribute å’Œç›‘å¬å™¨éƒ½å¯ä»¥å·¥ä½œï¼Œä¸å¿…å†ä½¿ç”¨ `.native` ç›‘å¬å™¨ã€‚ğŸ¤”

## .sync ä¿®é¥°ç¬¦

æˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹ä¸€ä¸ª prop è¿›è¡Œ"åŒå‘ç»‘å®š"ã€‚ä¸å¹¸çš„æ˜¯ï¼Œ**çœŸæ­£çš„åŒå‘ç»‘å®šä¼šå¸¦æ¥ç»´æŠ¤ä¸Šçš„é—®é¢˜ï¼Œå› ä¸ºå­ç»„ä»¶å¯ä»¥å˜æ›´çˆ¶ç»„ä»¶ï¼Œä¸”åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶éƒ½æ²¡æœ‰æ˜æ˜¾çš„å˜æ›´æ¥æº**

æ¨èä½¿ç”¨`update:myPropName`çš„æ¨¡å¼è§¦å‘äº‹ä»¶å–è€Œä»£ä¹‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ªåŒ…å«`title`propçš„å‡è®¾ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸‹æ–¹æ³•è¡¨è¾¾å¯¹å…¶èµ‹æ–°å€¼çš„æ„å›¾ï¼š

```js
this.$emit('update:title',newTitle)
```

ç„¶åçˆ¶ç»„ä»¶å¯ä»¥ç›‘å¬é‚£ä¸ªäº‹ä»¶å¹¶æ ¹æ®éœ€è¦æ›´æ–°ä¸€ä¸ªæœ¬åœ°çš„æ•°æ® propertyã€‚ä¾‹å¦‚ï¼š

```html
<text-document
	v-bind:title="doc.title"
    v-on:update:title="doc.title = $event"
></text-document>
```

æˆ‘ä»¬ä¸ºè¿™ç§æ¨¡å¼æä¾›ä¸€ä¸ªç¼©å†™ï¼Œå³ `.sync`ä¿®é¥°ç¬¦ï¼š

```html
<text-document v-bind:title.sync="doc.title"></text-document>
```

> æ³¨æ„å¸¦æœ‰ `.sync` ä¿®é¥°ç¬¦çš„ `v-bind`ä¸èƒ½å’Œè¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨(ä¾‹å¦‚ v-bind:title.sync="doc.title"+'!')æ˜¯æ— æ•ˆçš„ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä½ åªèƒ½æä¾›ä½ æƒ³è¦ç»‘å®šçš„ property åï¼Œç±»ä¼¼ `v-model`

**å½“æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡åŒæ˜¯è®¾ç½®å¤šä¸ª prop çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å°†è¿™ä¸ª .sync ä¿®é¥°ç¬¦å’Œ v-bind é…åˆä½¿ç”¨**ä¼šæŠŠå¯¹è±¡æ¯ä¸€ä¸ª property(å¦‚ `title`éƒ½ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ prop ä¼ è¿›å»ï¼Œ**ç„¶åå„è‡ªæ·»åŠ ç”¨äºæ›´æ–°çš„ `v-on`ç›‘å¬å™¨)**

> å°† `v-bind.sync` ç”¨åœ¨ä¸€ä¸ªå­—é¢é‡çš„å¯¹è±¡ä¸Šï¼Œä¾‹å¦‚`v-bind.sync="{ title: doc.title }"`,æ˜¯æ— æ³•æ­£å¸¸å·¥ä½œçš„ï¼Œå› ä¸ºåœ¨è§£æä¸€ä¸ªåƒè¿™æ ·çš„å¤æ‚è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œæœ‰å¾ˆå¤šè¾¹ç¼˜æƒ…å†µéœ€è¦è€ƒè™‘

