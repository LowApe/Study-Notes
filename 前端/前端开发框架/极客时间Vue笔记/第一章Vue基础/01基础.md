# 01

Vue ç‰¹ç‚¹

- æ›´åŠ è½»é‡ä½¿ç”¨ 20kB min+gzip è¿è¡Œå¤§å°
- æ¸è¿›å¼æ¡†æ¶(ç”¨ä»€ä¹ˆå­¦ä»€ä¹ˆ)
- å“åº”å¼æ›´æ–°æœºåˆ¶(æ•°æ®å˜åŒ–æ¸²æŸ“ç•Œé¢ä¹Ÿç¼–ç )
- å­¦ä¹ æˆæœ¬ä½

# ç¯å¢ƒæ­å»º

- æ¸¸è§ˆå™¨ï¼šChrome
- IDEï¼šWebStorm æˆ–è€… VS Code
- Node.js 8.9+ npm
- Vue DevTools

# Vue Demo

ä¸‹é¢ç¤ºä¾‹é€šè¿‡ CDN å¼•å…¥ Vue js æ–‡ä»¶ï¼Œç„¶åé€šè¿‡Vueå»æ§åˆ¶ç•Œé¢

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- æ–‡ä»¶å¼•ç”¨æ–¹å¼ -->
    <!-- <script src="vue.js"></script> -->
    <!-- CDNå½¢å¼å¼•ç”¨ -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
</head>
<body>
    <div id="app">
        {{message}}
        <todo-item v-for="item in list" v-bind:todo="item" v-bind:key="item.id"></todo-item>
    </div>
    <script>
        Vue.component('todo-item', {
        props: ['todo'],
        template: '<li class="text">{{ todo.text }}</li>'
   		 })
        var app = new Vue({
            el: '#app',
            data:{
                message: 'Hello Vue!',
                list: [
                    {
                        id: 0,
                        text: '1'
                    },
                    {
                        id: 1,
                        text: '2'
                    },
                    {
                        id: 2,
                        text: '3'
                    }
                ]
            }
        })
    </script>
</body>
</html>
```

> HTML ä¸æ¨èçš„åŸå› 
>
> - å…¨å±€å®šä¹‰ï¼šå¼ºåˆ¶è¦æ±‚æ¯ä¸ª component å‘½åä¸é‡å¤
> - å­—ç¬¦ä¸²æ¨¡ç‰ˆï¼šç¼ºä¹è¯­æ³•é«˜äº®ï¼Œåœ¨ HTMLæœ‰å¤šè¡Œçš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°`\`
> - ä¸æ”¯æŒ CSSï¼šæ„å‘³ç€å½“ HTML å’Œ JavaScript ç»„ä»¶åŒ–ï¼Œä¸æ”¯æŒ CSS ç»„ä»¶åŒ– ğŸ¤”å…¨å±€ CSS
> - æ²¡æœ‰æ„å»ºæ­¥éª¤: åªèƒ½ä½¿ç”¨ HTML å’Œ ES6 JSã€‚ä¸èƒ½ä½¿ç”¨é¢„å¤„ç†å™¨ï¼Œå¦‚ Pugå’Œ Babelï¼Œä¸æ”¯æŒçƒ­éƒ¨ç½²

# Vue CLI

```shell
# å…¨å±€å®‰è£… vue cli
npm install -g @vue/cli
# å®‰è£…åä½¿ç”¨ cli åˆ›å»ºé¡¹ç›®
vue create xxx(æ–‡ä»¶åï¼‰
```

![image.png](http://ww1.sinaimg.cn/mw690/006rAlqhgy1gkybpos39lj30oy0dowf9.jpg)

é€‰æ‹©é»˜è®¤

![image.png](http://ww1.sinaimg.cn/mw690/006rAlqhgy1gkybs4w91zj30m207i74n.jpg)

run å‘½ä»¤å¯åŠ¨é¡¹ç›®

**é¡¹ç›®ç»“æ„**

![image.png](http://ww1.sinaimg.cn/mw690/006rAlqhgy1gkyc1u4srtj30ce0hqwfh.jpg)

> TodoItem å’Œ App1 å¯¹åº”ä¸‹é¢æ”¹é€ 

## å•æ–‡ä»¶ç»„ä»¶

>  todoList ä¸¤ç§æ˜¾ç¤º

**HTMLæ–‡ä»¶**

```html
<script>
	 Vue.component('todo-item', {
        props: ['todo'],
        template: '<li class="text">{{ todo.text }}</li>'
    })
</script>
```

**VUEå•æ–‡ä»¶**

```vue
<template>
  <li class="text">{{ todo.text }}hello</li>
</template>

<script>
export default {
  props:['todo'],
}
</script>

<style scoped>
  .text{
    color: #42b983;
  }
</style>
```

# Vueç»„ä»¶æ ¸å¿ƒæ¦‚å¿µ-å±æ€§

> Vue ç»„ä»¶å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªä¸ªç‹¬ç«‹ã€å¯å¤ç”¨çš„UIæ¨¡å— `Vue ç»„ä»¶ = Vue ç¤ºä¾‹ = new Vue(options)` ä¸åŒç»„ä»¶ options ä¸åŒ

å±æ€§ï¼š

- è‡ªå®šä¹‰å±æ€§ props (ç»„ä»¶ props ä¸­å£°æ˜çš„å±æ€§)
- åŸå£°å±æ€§ attrs  (æ²¡æœ‰å£°æ˜çš„å±æ€§ï¼Œé»˜è®¤è‡ªåŠ¨æŒ‚è½½åˆ°ç»„ä»¶æ ¹å…ƒç´ ä¸Šï¼Œè®¾ç½® inheritAttrs ä¸º false å¯ä»¥å…³é—­è‡ªåŠ¨æŒ‚è½½)
- ç‰¹æ®Šå±æ€§ classã€style (æŒ‚è½½ç»„ä»¶æ ¹å…ƒç´ ä¸Šï¼Œæ”¯æŒå­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ç­‰å¤šç§è¯­æ³•)

```vue
// props å†™æ³•
<script>
export default{
	name:'PropsDemo',
    // inheritAttrs: false,
    // props:['name','type','isVisible'],
    props:{
        name:String,
        type:{
            validator:function(value){
                return xxx;
            }
        },
        isVisible:{
            type:Boolean,
            default:false
        }
    },
    method:{
        handleClick(){
            // ç¦ç”¨ä¸‹é¢è¿™ç§ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’çš„å±æ€§
            // this.type = "warning"
            // ä½¿ç”¨å›è°ƒ
            this.onChange(this.type == "succcess"? "":"" )
        }
    }
}
</script>
```

> ä¸Šé¢ prosp å±æ€§çš„keyå¯¹åº”çš„value å¯¹è±¡éƒ½æœ‰ type æ¥å—ç±»å‹ï¼Œä»¥åŠ default é»˜è®¤å€¼ã€‚ä½¿ç”¨å±æ€§ï¼Œå¯ä»¥å¯¹åº”ç»„ä»¶æ ‡ç­¾ä¸Šä¼ é€’å¯¹åº”çš„ç±»å‹å€¼ï¼Œå¦‚ä¸‹:å¯ä»¥å‘ç°é©¼å³°å˜é‡ `isVisible`åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šå˜æˆ`is-visible`

```vue
<Pros
      name= "Hello"
      :type="type"
      :is-visible="false"
      >
</Pros>
```

> Vue ç»„ä»¶æ˜¯å•å‘æ•°æ®æµçš„ï¼Œä¸èƒ½ç›´æ¥æ›´æ”¹çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼ï¼Œå¯ä»¥é€šè¿‡**å›è°ƒ**çš„æ–¹å¼å»æ›´æ”¹

# Vueç»„ä»¶æ ¸å¿ƒæ¦‚å¿µ-äº‹ä»¶

äº‹ä»¶ï¼š

- æ™®é€šäº‹ä»¶
	- @clickï¼Œ@inputï¼Œ@changeï¼Œ@xxxç­‰äº‹ä»¶ï¼Œé€šè¿‡ `this.$emit('xxx',...)`è§¦å‘
- ä¿®é¥°ç¬¦äº‹ä»¶
	- @input.trim,@click.stop,@subimt.preventç­‰ï¼Œä¸€èˆ¬ç”¨äºåŸå£° HTML å…ƒç´ ï¼Œè‡ªå®šä¹‰ç»„ä»¶éœ€è¦è‡ªè¡Œå¼€å‘æ”¯æŒ



# Vueç»„ä»¶æ ¸å¿ƒæ¦‚å¿µ-æ’æ§½

```vue
// æ™®é€šå†™æ³•
<template slot="xxxx"></template>
<template v-slot="xxxx"></template>
// ä½œç”¨åŸŸæ’æ§½
<temolate slot="xxx" slot-scops="props"></temolate>
<temolate v-slot="xxx" slot-scops="props"></temolate>
```

demo ç¤ºä¾‹ï¼š

```

```

# ç†è§£è™šæ‹ŸDOMåŠkey å±æ€§çš„ä½œç”¨

ä¼ ç»Ÿçš„ JQuery æ“ä½œ DOM æ¥æ›´æ–°ç•Œé¢å†…å®¹ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„æ“ä½œ DOM éœ€è¦æ¶ˆè€—å¤ªå¤šçš„æ€§èƒ½ï¼ŒVue å¼•ç”¨äº†ç‰¹åˆ«çš„ diff ç®—æ³•ï¼Œç”¨æ¥æ¯”è¾ƒ DOM æ ‘åŒçº§çš„å˜åŒ–æ¯”è¾ƒï¼Œä¸ºä»€ä¹ˆ DOM ä¸ key ä¹‹é—´æœ‰å…³è”ï¼Ÿæ˜¯ä¸ºäº†é…åˆæ¯”è¾ƒç®—æ³•ï¼Œå¢åŠ äº† key åï¼ŒåŒçº§æ¯”è¾ƒå¦‚æœé¡ºåºä¸åŒï¼Œæ ¹æ® key å¯ä»¥åˆ¤æ–­æ˜¯æ›´æ–°äº†èŠ‚ç‚¹ï¼Œè¿˜æ˜¯ç§»åŠ¨äº†èŠ‚ç‚¹çš„ä½ç½®ã€‚

# å¦‚ä½•è§¦å‘ç»„ä»¶çš„æ›´æ–°

Vue æ˜¯æ•°æ®é©±åŠ¨é¢ï¼Œ**ä»»ä½•ç›´æ¥æ›´æ”¹ DOM çš„è¡Œä¸ºéƒ½æ˜¯ä½œæ­»**æ•°æ®æ¥æº

- æ¥è‡ªçˆ¶å…ƒç´ çš„å±æ€§
- æ¥è‡ªç»„ä»¶è‡ªèº«çš„çŠ¶æ€ data
- æ¥è‡ªçŠ¶æ€ç®¡ç†å™¨

æ•°æ®é©±åŠ¨ï¼š

![image.png](http://ww1.sinaimg.cn/large/006rAlqhgy1gln5umiqx6j30ry0dqjt2.jpg)







å¦‚ä½•è§¦å‘ç»„ä»¶çš„æ›´æ–°ï¼š

- **åœ¨ data ä¸­å†™åœ¨ reutrnä¸­çš„çŠ¶æ€æ‰èƒ½å“åº”å¼æ›´æ–°**

- props æ¥å—çˆ¶ç»„ä»¶çš„å±æ€§ï¼Œå¯ä»¥å®šä¹‰æ¥å—çš„ç±»å‹

![image.png](http://ww1.sinaimg.cn/large/006rAlqhgy1gln5xyprqvj30xc0kumyp.jpg)

Vue å®ä¾‹åŒ–çš„æ—¶å€™æ—¶å€™ï¼Œå¯¹ data åšäº†è½¬æ¢ï¼Œåœ¨ä»£ç†å±‚å¯¹æ•°æ®å¤„ç†ï¼Œç»„ä»¶åœ¨æ¸²æŸ“çš„æ—¶å€™ï¼Œå½“æ•°æ®éœ€è¦çš„æ—¶å€™ï¼Œå°†æ•°æ®æ”¾åˆ° watcher é‡Œé¢ï¼Œå¦‚æœæ²¡æœ‰ç”¨åˆ°ï¼Œé‚£å°±å¹¶ä¸ä¼šé€šçŸ¥ watchï¼Œä¹Ÿä¸ä¼šè§¦å‘æ›´æ–°.

**vue js åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹éå†ä¼ ç»™å®ä¾‹åŒ–å¯¹è±¡é€‰é¡¹ä¸­çš„ data é€‰é¡¹ï¼Œéå†å…¶æ‰€æœ‰å±æ€§å¹¶ä½¿ç”¨ `Object.defineProperty æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º getter/setter`**

**æ•°ç»„å“ªäº›æ–¹æ³•æ”¯æŒå“åº”å¼æ›´æ–°ï¼Ÿ**

> å‚è€ƒVueæ–‡æ¡£ï¼Œè°ƒç”¨æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼Œä¼šè§¦å‘å“åº”å¼æ›´æ–°

# åˆç†åº”ç”¨è®¡ç®—å±æ€§å’Œç›‘å¬å™¨

## è®¡ç®—å±æ€§ computed

- å‡å°‘æ¨¡ç‰ˆä¸­è®¡ç®—é€»è¾‘
- æ•°æ®ç¼“å­˜
- ä¾èµ–å›ºå®šçš„æ•°æ®æ ¼å¼

ç¤ºä¾‹çš„å­—ç¬¦ä¸²åè½¬ï¼Œé€šè¿‡ä¸¤ç§ï¼Œä¸€ç§æ™®é€šæ–¹æ³•ï¼Œä¸€ç§åœ¨è®¡ç®—å±æ€§æ–¹æ³•ï¼Œ**è®¡ç®—å±æ€§å¥½å¤„æ˜¯ï¼Œåªæœ‰åœ¨å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰è¿›è¡Œåˆ·è¡Œï¼Œä½†æ˜¯æ™®é€šæ–¹æ³•ï¼Œæ˜¯æ¨¡ç‰ˆå‘ç”Ÿå˜åŒ–å°±ä¼šè°ƒç”¨ä¸€æ¬¡**

## ç›‘å¬å™¨ watch

- æ›´åŠ çµæ´»ã€é€šç”¨
- watch ä¸­å¯ä»¥æ‰§è¡Œä»»ä½•é€»è¾‘ï¼Œå¦‚å‡½æ•°èŠ‚æµï¼ŒAjax å¼‚æ­¥è·å–æ•°æ®

ç›‘å¬æˆ‘ä»¬çš„æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–

```vue
<script>
	export default {
        data:function(){
            return {
                a:1
			}
        }
    },
    watch: {
        a:function(val,oldVal){
            this.b.c += 3;
            console.log('new:hs',val,oldVal);
        },
       	e:{
            handle: fucntion(val,oldVal){
                
            },
            deep:true
        }
	}
</script>
```

## computed å’Œ watch

- computed èƒ½åšçš„ï¼Œwatch éƒ½èƒ½åš
- èƒ½ç”¨ computed å°½é‡ä½¿ç”¨

> èŠ‚æµï¼šå°±æ˜¯ä¸æ–­åœ°è§¦å‘äº‹ä»¶çš„æ—¶å€™åˆ«è€æ˜¯å‘è¯·æ±‚ï¼Œå‘ä¸€æ¬¡å°±å¤Ÿäº†ã€‚

# ç”Ÿå‘½å‘¨æœŸçš„åº”ç”¨åœºæ™¯å’Œå‡½æ•°å¼ç»„ä»¶

- åˆ›å»ºé˜¶æ®µ
	- beforeCreate åˆå§‹åŒ–äº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸ
	- created  æ•°æ®è§‚æµ‹ã€å±æ€§ã€ç›‘å¬å™¨é…ç½®
	- beforeMount æ¨¡ç‰ˆç¼–è¯‘åˆ° render
	- render
	- mounted å¼‚æ­¥è¯·æ±‚ã€æ“ä½œ DOMã€å®šæ—¶å™¨
- æ›´æ–°é˜¶æ®µ
	- beforeUpdate ä¾èµ–æ•°æ®æ”¹å˜æˆ– `$forceUpdate `å¼ºåˆ¶åˆ·æ–°ï¼Œç§»é™¤å·²ç»æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨ç­‰**(ä¸å¯æ›´æ”¹ä¾èµ–æ•°æ®ï¼Œé€ æˆæ­»å¾ªç¯)**
	- render
	- updated æ“ä½œ DOM æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ç­‰**(ä¸å¯æ›´æ”¹ä¾èµ–æ•°æ®)**
- é”€æ¯é˜¶æ®µ
	- beforeDestory ç§»é™¤å·²ç»æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œè®¡æ—¶å™¨ç­‰
	- destroyed 

## å‡½æ•°å¼ç»„ä»¶

> å› ä¸ºæ¨¡ç‰ˆä¸­æ²¡æœ‰æä¾›ç›¸åº”çš„ä¸´æ—¶å˜é‡ï¼Œå¯¹äºä¸€äº›é‡å¤ä½¿ç”¨çš„é€»è¾‘è®¡ç®—ï¼Œå¹¶ä¸”è¿˜éœ€è¦**ä¸´æ—¶å˜é‡**éœ€è¦ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œ**å› ä¸º computed è®¡ç®—å±æ€§ä¾èµ–çš„æ•°æ®å¿…é¡»å“åº”å¼æ•°æ®**

- functional:true
- æ— çŠ¶æ€ã€æ— ç¤ºä¾‹ã€æ²¡æœ‰ this ä¸Šä¸‹æ–‡ã€æ— ç”Ÿå‘½å‘¨æœŸ



`tempVar.js`

```js
export default{
    functional:true,
    render: (h,ctx) => {
        return xxx;
	}
}
```

åœ¨æ¨¡ç‰ˆä¸­ä½¿ç”¨ä¸´æ—¶å˜é‡

```vue
<template>
	<TempVar
             :var1="hello ${name}"
             :var2="destroyClock ? 'hello vue': 'hello world'">
        <template v-slot="{var1,va2}">
            {{ var1 }}
            {{ var2 }}
		</template>
    </TempVar>
</template>
<script>
import TempVar from './TempVar';
export default{
    components: {
        TempVar
    },
    data:{
        
    }
}
</script>
```

# æŒ‡ä»¤çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ

è¯­æ³•ç³–ã€æ ‡å¿—ä½

## å†…ç½®æŒ‡ä»¤

- v-text å­å…ƒç´ å†…å®¹æ›¿æ¢
- v-html æ·»åŠ htmlï¼Œä¸æ¨è
- v-show CSSæ˜¯å¦æ˜¾ç¤º,æ›´æ”¹çš„æ˜¯  dispaly:none
- v-if  DOM ä¸Šæ˜¾ç¤ºä¸åˆ é™¤
- v-else-if 
- v-else
- v-bind ä½¿ç”¨ `:`ç®€å†™
- v-on ä½¿ç”¨ `@`ç®€å†™
- v-model
- v-pre è·³è¿‡ {{}} ç¼–è¯‘
- v-once è§£æ {{ }} å˜é‡å€¼è§£æä¸€æ¬¡

## è‡ªå®šä¹‰æŒ‡ä»¤

Vue æä¾›ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œ

- bind
- inserted
- update
- compoentUpdated
- unbind

```vue
<script>
	export default{
        appendText:{
            bind() {
                
			},
            inserted(el,binding){
                
            },
            update(){
                
			},
            componentUpdated(el,binding){
                
            },
            unbind(){
                
            }
        }
    }
</script>
```

# å¸¸ç”¨é«˜çº§ç‰¹æ€§ provide-inject

