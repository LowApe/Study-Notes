# 走进 Java NIO

Java 流行的原因：

- 跨平台：一次编写，到处运行
- 庞大的类库和第三方开源类库
- 基于 Java 开发更加简单和便捷

> 由于 Java 早期类库设计中功能并不完善,或存在一些缺陷，其中早起 Java I/O 仅支持 I/O Socket 通信类库，2002年 JDK 1.4 支持非阻塞 I/O 

后面通过 **I/O 基础** 和 **Java 的 I/O 演进**

## I/O 基础入门

JDK 1.4 之前主要问题：

- 没有数据缓冲区，I/O性能存储问题；
- 没有 C 或者 C++ 中的 Channel 概念，只有输入和输出流；
- 同步阻塞式 I/O 通信（BIO）,通常会导致通信线程被长时间阻塞；
- 支持的字符集有限，硬件可移植性不好。

> 扯到 Linux 网络模型？？？

# Java I/O 发展简史

从 JDK1.0 到 JDK 1.3,Java的 I/O 类库都非常原始，很多 UNIX 网络编程中的概念或者接口在 I/O 类库中都没有体现，例如：

- Pipe
- Channel
- Buffer
- Selector

2002 年发布 JDK 1.4时，NIO 新增了 **java.nio**包，提供了很多进行异步 **I/O**开发的 API 和类库，主要接口：

- 进行异步 I/O 操作的缓冲区 **ByteBuffer**等;
- 进行异步 I/O 操作的管道 **Pipe**;
- 进行各种 I/O 操作(异步或者同步)的 **Channel**，包括 ServerSocketChannel 和 SocketChannel
- 多种字符集的编码能力和解码能力
- 实现非阻塞 I/O 操作的多路复用器 **selector**;
- 基于流行的 Perl 实现的**正则表达式**类库
- 文件通道 **FileChannel**

新的 NIO 类库的提供,极大地促进**基于 Java 的异步非阻塞编程的发展和应用**,但是，对**文件系统的处理能力仍显不足**

- 没有统一的**文件属性**(例如读写权限);
- API 能力比较弱，例如**目录的级联创建和递归遍厉**，往往需要自己实现
- 底层存储系统的一些高级 API 无法使用
- 所有的文件操作都是**同步阻塞调用**，不支持异步文件读写操作

2011年 JDK 1.7 正式发布。NIO2.0，主要提供了如下三个方面的改进。

- 提供能够批量获取文件的API，另外它还提供了标准文件系统的 SPI ，供各个服务提供商扩展实现
- 提供 AIO 功能，支持基于文件的异步 I/O 操作和针对网络套接字的异步操作
- 完成**通道**功能，包括对配置和多播数据报的支持





