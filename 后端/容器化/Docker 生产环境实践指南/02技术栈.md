# 技术栈

生产环境的 Docker 设置包括了一些基本的架构组件,这些组件对运行容器化的及传统的服务器集群来说是通用的。在很多方面，可以简单地认为构建和运行容器的方式与当前构建和运行虚拟机的方式是一样的，只是使用了一套新的工具和技术

1. 构建并保存镜像快照
2. 将镜像上传到仓库中·1
3. 下载镜像到某台宿主机中
4. 以容器方式运行镜像
5. 将容器连接到其他服务上
6. 路由容量到容器中
7. 将容器日志发送到指定位置
8. 监控容器

与虚拟机不同的是，容器通过将宿主机(裸机或虚拟机)与应用程序服务隔离，从而提供了更高的灵活性。这为构建和匹配流程带来了直接的改善，但由于额外的容器嵌入层，会增加一些开销。

典型的 Docker 技术栈将包括用于解决一下关注点的组件：

- 构建系统
- 镜像仓库
- 宿主机管理
- 配置管理
- 部署
- 编排
- 日志
- 监控

## 构建系统

- 如何构建镜像，并将其推送到镜像仓库中？
- Dockerfile 位于何处？

构建 Docker 镜像通常有以下两种方式

1. 开放人员电脑手工构建，然后推送到仓库中
2. 使用 CI/CD 系统在代码提交时自动构建

理想的 Docker 生产环境将使用类似 Jenkins 或 Codeship 这样的 **CI/CD(匹配集成/持续部署)系统**，在代码提交时自动构建镜像。一旦容器构建完毕，它将被发送到镜像仓库中，**自动化测试系统**从中下载并运行该镜像



## 镜像仓库

- Docker 镜像保存在哪里？

当前的 Dokcer 镜像仓库可靠性比较差，但是每个月都在改善。多数团队一般会在自己的基础设施上运行私有的镜像仓库，以减少网络传输成本和延迟

## 宿主机管理

- 如何配备宿主机？
- 如何升级宿主机

