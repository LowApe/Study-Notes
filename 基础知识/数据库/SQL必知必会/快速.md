# SQL 概述

SQL 可以应用到任何数据库管理系统(DMBS),主要适用于以下系统

- MariaDB
- MYSQL
- Oracle
- SQLite
- PostgreSQL

> SQL 结构化查询语言(Structured Query Language)。SQL 是一种专门用来与数据库沟通的语言

SQL 优点:

- SQL 不是某个特定数据库供应商专有的语言。几乎所有重要的 DMBS 都支持 SQL
- SQL 简答易学
- 进行非常复杂和高级的数据库操作



# SQL 检索数据

> 一般关键字大写，列名小写

## Select 语句

单列、多列、所有列，未排序查询

```mysql
select cloumn from table_name;

select cloumn1,cloumn2 form table_name;

select * frome table_name;
```

> 在使用通配符 * 。虽然使用通配符能让你自己省事，不用明确列出所需列，但检索不需要的列通常会降低检索和应用程序的性能。

## 检索不同的值 DISTINCT

如果你不希望每个值每次都出现，可以使用 DISTENCT 



```mysql
SELECT DISTINCT cloumn
FROM table_name;

```

> ⚠️注意：DISTINCT 关键字作用于所有的列，不仅仅是跟在其后的那一列

## 限制结果

SELECT 语句返回指定表中所有匹配的行，很可能是每一行。

MySQL、MariaDB、PostgreSQL或者SQLite 使用 LIMIT 字段，其他数据库请查看书本。

```mysql
SELECT cloumn FROM
table_name LIMIT 5；

SELECT cloumn FROM
table_name LIMIT 5 OFFSET 2; -- 从2这个索引开始检索五行数据
```

> 第 0 行：第一个被检索的行是第 0 行，而不是第 1 行
>
> MySQL 和 MariaDB 快捷键：即 LIMIT 3,4



## 使用注释

```mysql
SELECT * FROM
 table_name; -- 两个短横线是一个嵌在行内注释
# 这是一个行内注释
/*
其中内容被注释
*/
```

1. `--` 嵌在行内注释
2. `#` 一整行的行内注释
3. `/**/` 从 `/*`开始，到`*/`结束的注释

# 排序检索数据

这一节如何使用 SELECT 语句的 ORDER BY 子句，根据需要排序检索出的数据

### 排序数据

> 如果不排序查询，可能显示方式是插入到数据库的顺序显示。

```mysql
SELECT cloumn FROM
table_name
ORDER BY cloumn; -- 安装 cloumn 字母进行排序 
```



> OREDER BY 子句的位置：应该保证它是 SELECT 语句中最后一条子句。如果它不是最后的子句，将会出现错误消息。
>
> **通过选择列中的字段进行排序**



### 按多个列排序

要按多个列排序，简单指定列名，列名之间用逗号分开即可

```mysql
SELECT cloumn1,cloumn2,cloumn3 FROM
table_name 
ORDER BY cloumn1,cloumn2;
```

如果 cloumn1 有不唯一的选择，再通过 cloumn2 列的信息进行排序



### 按列位置排序

除了能用列名指出排序顺序外， ORDER BY 还支持按相对列位置进行排序。

```mysql
SELECT cloumn1,cloumn2,cloumn3 FROM
table_name
ORDER BY 1,2;
```

其中 1，2 表示根据选择列的第一第二列为排序对象



### 指定排序方向

数据排序不限于升序排序(从 A 到 Z)，这只是默认的排序顺序，也可以指定 DESC 关键字进行降序排序

```mysql
SELECT cloumn1,cloumn2,cloumn3 
FROM table_name
ORDER BY 1,2 DESC;

SELECT cloumn1,cloumn2,cloumn3 
FROM table_name
ORDER BY 1 DESC,2;
```

指定某列的排序方向

# 过滤数据

使用 SELECT 语句的 WHERE 子句指定搜索条件

## 使用 WHERE 子句

```mysql
SELECT * FROM
table_name
where cloumn = value;
```

> ⚠️注意：在同时使用 ORDER BY 和 WHERE 子句时，应该让 **ORDER BY 位于 WHERE 之后**，否则将会产生错误



## WHERE 子句操作符

| 操作符  | 说明             |
| ------- | ---------------- |
| =       | 等于             |
| <>      | 不等于           |
| !=      | 不等于           |
| <       | 小于             |
| <=      | 小于等于         |
| >       | 大于             |
| >=      | 大于等于         |
| BETWEEN | 指定的两个值之间 |
| IS NULL | 为 NULL 值       |



```mysql
# 检查单个值
SELECT cloumn1,cloumn2
FROM table_name
WHERE cloumn1<value;
# 不匹配检查
SELECT cloumn1,cloumn2
FROM table_name
WHERE cloumn1<>value;

# 范围值检查
SELECT cloumn1,cloumn2
FROM table_name
WHERE cloumn1 BETWEEN 5 AND 10;

# 空值检查
SELECT cloumn1,cloumn2 
FROM table_name
WHERE cloumn2 IS NULL;



```

# 高级数据过滤

WHERE 子句以建立功能更强、更高级的搜索条件。我们还将学习如何使用 NOT 和 IN 操作符



## 组合 WHERE 子句

用来联结或改变 WHERE 子句中的子句的关键字，也称为逻辑操作符

### AND 操作符

```mysql
SELECT cloumn1,cloumn2
FROM table_name
WHERE 
cloumn1 = value1 AND cloumn2 <= value;
```

交集？

### OR 操作符

```mysql
SELECT cloumn1,cloumn2
FROM table_name
WHERE cloumn1 = value1 OR cloumn2 = value2
```

并集？

### 求值顺序

WHERE 子句可以包含任意数目的 AND 和 OR 操作

> ⚠️注意：优先处理 AND 操作符。然后处理 OR



```mysql
SELECT cloumn1,cloumn2,cloumn3 FROM 
table_name
WHERE cloumn1=value1 OR
cloumn2=value2 AND cloumn3>10;

SELECT cloumn1,cloumn2,cloumn3 FROM 
table_name
WHERE (cloumn1=value1 OR
cloumn2=value2) AND cloumn3>10;
```



## IN 操作符

IN 操作符用来指定条件范围，范围中的每个条件都可以进行匹配。IN 取一组由逗号分隔、扩在圆括号中的合法值。

```mysql
SELECT cloumn1,cloumn2
FROM table_name
WHERE cloumn1 IN('value1','value2')
```

IN 操作符完成了与 OR 相同的功能

## NOT 操作符

WHERE 子句的中的 NOT 操作符有且只有一个功能，那就是否定其后所跟的任何条件。

```mysql
SELECT cloumn1,cloumn2
FROM table_name
WHERE cloumn1 NOT IN('value1','value2')
```

也就是取反

