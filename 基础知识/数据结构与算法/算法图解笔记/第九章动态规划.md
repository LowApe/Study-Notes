# 动态规划

本章内容

- 学习动态规划，这是一种解决棘手问题的方法，它将问题分成小问题，并先着手解决这些小问题
- 学习如何设计问题的动态规划解决方案

## 背包问题

> 之前的实例：假设你是个小偷，背着一个可装`4`磅东西的背包，如何选择可以拿**价值最高的**东西

简单算法：尝试各种可能的商品组合，并找出价值最高的组合。这样可行，但是**速度非常慢**。在三件需要8种不同的集合；有4件商品，需要16个集合。这种算法的时间复杂度时O($2^n$),当适量多到一定程度，这种算法就行不通了。

## 动态规划

动态规划的原理：先解决子问题，再逐步解决大问题，通过**网格中单元格值**的公式

![image.png](http://ww1.sinaimg.cn/large/006rAlqhgy1g7r1rwv6ewj30q00fcq4u.jpg)

列是将背包的容量4划分成1～4个类型的背包。然后行是将可装入种类也划分成1～3种。利用这种表格，可以将大问题分成小问题，根据解决的小问题，逐步解决大问题。



- 第一行最大价值为1500
- 第二行最大价值为3000
- 第三行最大价值为3500

$cell[i][j]=两者种较大的那个$ 

上一个单元格的值($cell[i-1][j]$) vs $当前商品的价值+剩余空间的价值$ 

## 背包问题FAQ

如果我们增加第四件商品可装入--iPhone(2000$ 1磅)

![image.png](http://ww1.sinaimg.cn/large/006rAlqhly1g7r2v4osmvj30na0k4mzq.jpg)

- 最后一行，第二列：拥有2空间，分别为可以装入iPhone+吉他，所以3500，剩余空间0
- 最后一行，第三列：拥有3空间，三背包的最大价值还是3500(iPhone+吉他)，剩余空间1
- 最后一行，第四列：拥有4空间，四背包最大价值是4000(笔记本电脑+iPhone)

### 行的排列顺序发生变化时结果将如何

没有变化，各行的排列顺序无关紧要

### 增加一件更小的商品如何

需要考虑粒度更细，因此必须调整网格

### 旅游行程最优化

实例：假设你要去度假，假期两天，你没办法去很多地方，因此你列出单子

![image.png](http://ww1.sinaimg.cn/large/006rAlqhgy1g7r48etqjxj30v60fq0yd.jpg)

这也是一个背包问题！但约束条件不是背包的容量，二是有限的时间；不是决定该装入那些商品，而是决定该去游览那些名胜。根据清单绘制动态规划网格

![image.png](http://ww1.sinaimg.cn/large/006rAlqhgy1g7r4f44gubj30v60n0gz6.jpg)

### 处理相互依赖的情况

假设你还想去巴黎，因此在前述清单中又添加了几项

![image.png](http://ww1.sinaimg.cn/large/006rAlqhly1g7r4gtvou6j30ri080acx.jpg)

> 但仅当每个子问题都是离散的，即不依赖于其他子问题时，动态规划才管用

### 计算最终的解时会涉及两个以上的子背包吗？

为获得前述背包问题的最优解，可能需要偷两件以上的商品。但根据动态规划算法的设计，最多只需合并两个子背包，即根本不会涉及两个以上的子背包。不过这些子背包可能包含子背包



### 最优解可能导致背包没装满吗？

完全可能

## 最长公共子串

之前的动态规划问题，得到什么启示

- 动态规划可帮助你在给定约束条件下找到最优解。
- 在问题可分解为**彼此独立**且**离散**的子问题时，就可是一些通用的小贴士 
- 每种动态规划解决方案都涉及网格

