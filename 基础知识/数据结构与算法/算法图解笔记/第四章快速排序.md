# 快速排序
本章内容
- 学习分而治之
- 学习快速排序

# 分而治之
实例：将一块地均匀地分成方块，并确保分出的方块是最大的呢？使用分而治之，分而治之是递归的
快速排序的步骤
1. 找出基线条件，这种条件必须尽可能简单
2. 不断将问题分解(缩小规模)，直到符合基线条件

按照小的边找，剩下的区域采用相同的算法，这样将问题缩小成剩下区域。直到没有剩下的区域

实例：给定一个数字数组[2,4,6],你需要将这些数字相加，并返回结果。使用循环
```python
def sum(arr):
    total = 0
    for x in arr:
        total += x
    return total

print(sum[2,4,6])

```

如何使用递归函数来完成这种任务？
- 第一步：找出基线条件
- 第二步：每次递归调用都必须离空数组更近一步

![image.png](http://ww1.sinaimg.cn/large/006rAlqhly1g7ho1euct0j30vk02yta3.jpg)

> 提示：编写涉及数组的递归函数时，基线条件通常是**数组为空或只包含一个元素**

# 快速排序
> 快速排序：快速排序是[冒泡排序]()的一种改进.<br>快速排序的工作原理：首先从数组中选择一个元素，称为**基准值**，接下来，找出比基准值小的元素及其比基准值大的元素，这被称为**分区**.最后左右两边同样的方式递归下去，直到数组为空的基线条件

```python
def quicksort(array):
    if len(array)<2:
        # 基线条件：为空或只包含一个元素的数组是“有序”
        return array
    else:
        pivot = array[0]#递归条件
        less = [i for i in array[1:] if i<=pivot]
        greater =[i for i in array[1:] if i>=pivot]
    return quicksort(less) + [pivot] + quicksort(greater)

print(quicksort([10,5,2,3]))

```
### 归纳证明
> 归纳证明是一种证明算法行之有效的方式，它分为两步：基线条件和归纳条件

实例：假设我要证明我能爬到梯子的最上面。
- 归纳条件是这样的：如果我站在一个横挡上，就能将脚放到下一个横挡上。换而言之，如果我站在第二个横挡上，我就能爬到第三个横挡。这就是**归纳证明**
- 基线条件是这样的，即我已经站在第一个横挡上。因此，通过每次爬一个横挡，我就能爬到梯子最顶端

## 再谈大O表示法
有一种合并排序，运行时间O(nlogn)，比选择排序(O(n^2))快的多.

快速排序的情况比较棘手
- 在最糟情况下，其运行时间为O(n^2)
- 在平均情况下，其运行时间为O(nlogn)

### 比较合并排序和快速排序

实例：先比较下面两个打印的运行效果
```python
def print_items(list):
    for item in list:
        print item
```

```python
from time import sleep:
def print_items2(list):
    for item in list:
        sleep(1)#睡眠1s
        print item
```

可以看出代码1要快与代码2，但是他们的运行时间都是O(n)，但实际是 **c*n**,c是固定时间量，通常被称为常量。

> 通常不考虑常量，因为如果两种算法的大O运行时间不同，这种常量将无关紧要。就拿二分查找和简单查找，如下图

![image.png](http://ww1.sinaimg.cn/large/006rAlqhly1g7hs3otv40j30vc06qdib.jpg)

> 有的时候，常量的影响可能很大，对快速查找和合并查找来说就是如此。快速查找的常量比合并查找小，因此如果我们的运行时间都为O(nlogn),快速查找的速度更快

### 平均情况和最糟情况

快速排序的运行时间取决于基准的选择，如果选择靠中间值，就是最佳情况(nlogn)。如果基准值靠左或者靠右，都会使一边的数组为空，所以是最糟情况O(n^2)

> 在最糟情况下，**栈长** 为O(n),而最佳情况下，栈长为O(logn)

# 小结
- 分而治之将问题逐步分解
- 实现快速排序时，请随机地选择用作基准值的元素。快速排序的平均运行时间为O(nlogn)
- 大O表示法中的常量有时候事关重大，这就是快速排序比合并排序快的远影所在
