3.5.2 典型架构
软件架构设计的一个核心问题是能否使用重复的架构模式，既能否达到架构级的软件重用。能否在不同的软件系统中，使用同一种架构。


> 常见的架构模式:
1. 管道/过滤器模式
2. 面向对象模式
3. 事件驱动模式
4. 分层模式
5. 知识库模式
6. 客户机/服务器模式
----
**管道/过滤器**
>在管道/过滤器架构模式中，每个构建都有一组输入/输出，构件读取输入的数据流，经过内部处理后，产生输出数据流，该过程主要完成输入流的变换及增量计算，

![](http://ww1.sinaimg.cn/large/006rAlqhly1ftd6kbh2tcj30c502r0ss.jpg)

管道/过滤器模式的优点
1. 体验了各功能模块的“黑盒”特性及高内聚,低耦合的特点
2. 可以将整个系统的输入/输出行为看成是多个过滤器行为的简单合成
3. 支持软件功能模块的重用
4. 便于系统维护：新的过滤器可以添加到现有系统中来，旧的可以由改进的过滤器替换
5. 支持某些特定的分析，如吞吐量计算、死锁检测等
6. 支持并行操作，每个过滤器可以作为一个单独的任务完成。

管道/过滤器模式的缺点
1. 通常导致系统处理过程的成批操作
2. 需要设计者协调两个相对独立但又存在关系的数据流
3. 可能需要每个过滤器自己完成数据解析和合成工作（如加密和解密）,从而导致系统性能下降，并增加了过滤器具体实现的复杂性

----

**面向对象模式**<br>
面向对象模式建立在数据抽象和面向对象的基础上，将数据的表达方式及其相应操作封装在一个抽象数据类型或对象中

> 面向对象模式的典型应用是基于构建的软件开发（CBD）

![面向对象模式](http://ww1.sinaimg.cn/large/006rAlqhly1ftd6y670k3j306e05qaac.jpg)

面向对象模式的优点：
1. 高度模块化
2. 分装功能实现了数据隐藏
3. 继承性提供了一种实现代码共享的手段
4. 提供了系统的灵活性，便于维护及扩充

面向对象系统的缺点：
对象之间的调用需要知道所调用对象的标识。如果对象的标识发生改变，就必须通知所有调用该对象的对象。否则系统将可能无法正常运行

----

**事件驱动模式**<br>
事件驱动模式的基本原理是构件并不直接调用过程，而是触发一个或多个事件。

> 事件驱动模式的主要特点是时间的触发者并不知道哪些构件会受到事件的影响，且不能假定构件的处理顺序，甚至不知道会调用哪些过程，使用事件驱动模式的典型系统包括各种图形界面工具

事件驱动模式的优点：
1. 支持软件重用,容易实现并发处理
2. 具有良好的可扩展性，通过注册可引入新的构件，而不影响现有构件。
3. 可以简化客户代码

事件驱动缺点：
1. 构件削弱了自身对系统的控制能力
2. 不能很好地解决数据交换问题
3. 使系统中各构件的逻辑关系变得更加复杂

----

**分层模式**<br>
分层模式采用层次化的组织方式，每一层都是为上一层提供服务，并使用下一层都是为上一层提供服务，并使用下一层提供的功能。这种模式允许将一个复杂问题逐步分层实现。层次模式中的每一层最多只影响两层，只要给邻居层提供相同的接口，就可以充分支持软件复用

> 分层模式的典型应用是分层通信协议，如 ISO/OSI 的七层网络模型

![分层模式](http://ww1.sinaimg.cn/large/006rAlqhly1ftd7rnqislj308i08hjrt.jpg)

分层模式的优点:
1. 有助把复杂的问题按功能分解，使整体设计更为清晰
2. 支持系统设计的逐级抽象
3. 具有较好的可扩展性
4. 支持复用

分层模式的缺点：
1. 并不是每个系统都可以很容易地划分出层次来：同时，各层功能的划分也没有一个统一的、正确的抽象方法。
2. 层次的个数过多，系统性能可能会下降

----

**知识库模式**<br>
知识库模式采用两种不同的构件：中央数据结构构件说明当前状态，独立构件在中央数据存储上执行，中央数据结构与独立的外部构件间的相互作用是系统中的主要问题。

> 知识库模式有两种不同的控制策略：如果输入流触发进程执行的选择，则为基于传统数据库型的知识库模式；如果中央数据结构的当前状态触发进程执行的选择，则为基于黑板系统的知识库模式

黑板系统三个部分:
1. 知识源：包含独立的、与应用程序相关的知识，知识源之间不直接进行通讯，它们之间的交互只通过黑板来完成
2. 黑板数据结构：按照与应用程序相关的层次来组织并解决问题的数据，知识源通过不断地改变黑板数据来解决问题
3. 控制：完全由黑板的状态驱动，黑板状态的改变决定了需要使用的特点知识

----

**客户机/服务器模式**<br>
C/S 模式是基于资源不对等，为实现共享而提出的。C/S 模式将应用一分为二，服务器负责数据管理，客户机完成与用户的交互任务。C/S 模式具有强大的数据操作和事务处理能力，模型思想简单，易于人们理解和接受

![](http://ww1.sinaimg.cn/large/006rAlqhly1ftd89wsgdnj309j07gglo.jpg)

C/S 模式的优点：
1. 客户机与服务器分离，允许网络分布操作；二者的开发也可分开同时进行
2. 一个服务器可以服务于多个客户机

缺点：
1. 客户机与服务器通信依赖于网络，可能成为整个系统运作的瓶颈；客户机的负荷过重，难以管理大量的客户机，系统的性能收到很大影响。
2. 如果服务器及其界面定义有改变，则客户机也要做相应改变
3. 数据安全性不好。客户端程序可以直接访问数据库服务器，使数据库的安全性受到威胁
