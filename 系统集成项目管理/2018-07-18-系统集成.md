3.5.3 软件架构设计方法

软件架构设计是动态的，设计的初期并不能完全确定下来，这与建筑设计不同。由于架构设计伴随着整个项目进行，因此在整个过程中一定要把握架构设计的目标。软件架构设计的总体目标可以概括：
1. 最大复用：复用包括构件的复用和设计模式的使用等多个方面
2. 复杂问题简单化：这也是中间件或多层技术的根本目标。在设计过程中，如果需要多个类协调完成某些功能时，应能正确使用适当的设计模式
3. 灵活的扩展性：具备灵活的扩展性使得用户可以再架构上进行二次开发或更加具体的开发

> 软件架构师软件系统中的核心元素，是系统中不易改变、比较稳定的部分，也是构建软件系统中其他部分的基础，因此系统构建的好坏从根本上决定了基于该架构所构建的软件系统的质量。

> 要建立一个正确的架构，首先要分析系统中的一些抽象概念（相对稳定的部分）针对问题领域中的概念进行分类，把看上去不同但本质上属于同一类的概念用一个抽象的概念表示出来，然后基于这些抽象概念创建架构，确定各抽象概念之间的关系。

> 很多模式本生就是针对系统架构提出的，例如模型-视图-控制器（MVC）是专门针对交互系统提出的。如果要构建一个交互系统，可以直接应用 MVC 模式，然后在该模式的场景下去发现模式、视图及控制器

3.5.4 软件架构分析与评估

对于目前广泛使用的分布式应用，其软件架构设计需要考虑如下问题
1. 关系数据库与对象数据库的选择问题
2. 用户界面选择使用 HTML
3. 灵活性和性能的考虑
4. 技术的选择
5. 聘请经验丰富的架构设计师

3.5.5 软件中间件

> 中间件是位于硬件、操作系统等平台和应用之间的通用服务，这些服务具有标准的程序接口和协议。不同的硬件及操作系统平台，可以有符合接口和协议规范的多种实现。

![中间件的应用结构](http://ww1.sinaimg.cn/large/006rAlqhly1ftdt4721fkj30c306374e.jpg)

中间件是一种独立的系统软件或服务程序，可以帮助分布式应用软件在不同的技术之间共享资源，它位于客户机/服务器的操作系统之上，管理计算机资源和网络通信。其重要的实现应用于平台的无关性。满足大量应用的需要、运行于多种硬件和操作系统平台、支持分布计算、提供跨网络/硬件/操作系统平台的应用或服务的透明交互、支持标准的协议、支持标准的接口，这些都是任意一类中间件所具备的特点。

> 中间件能够屏蔽操作系统和网络协议的差异，为应用程序提供多种通讯机制满足不同领域的应用需要。

----

> 几种主要的中间件
1. 数据库访问中间件
2. 远程过程调用中间件
3. 面向消息中间件
4. 事务中间件
5. 分布式对象中间件


----

> 数据库访问中间件<br>
数据库访问中间件通过一个抽象访问数据库，从而允许使用相同或相似的访问不同的数据库资源。典型的技术如 Windows 平台的 ODBC 和 Java 平台的 JDBC 等

----

> 远程过程调用<br>
远程过程调用(Remote Procedure Call,RPC)是一种广泛使用的分布式应用程序处理方法。一个应用程序使用 RPC 来远程执行一个位于不同地址空间内的过程，从效果上看和执行本地调用相同。一个 RPC 应用分为两个部分：服务器和客户机。客户机和服务器之间的网络通讯和数据交换通过代理程序(stub 与 skeleton)完成，从而屏蔽了不同操作系统和网络协议。

> 但是，RPC 所提供的是基于过程的服务访问，客户机与服务器进行直接连接，没有中间机构来处理请求，因此也具有一定的局限性。

----

> 面向消息中间件<br>
(Message-Oriented Middleware,MOM) 利用高效可靠的消息传递机制进行平台无关的数据交流，并可基于数据通信进行分布系统集成。典型的产品如 IBM 的 MQSeries

> 消息客户程序之间通过将消息放入消息队列或从消息队列中取出消息来进行通讯。客户程序不直接与其他程序通信，避免了网络通讯的复杂性

----

> 分布式对象中间件<br>
典型的产品如 OMG 的 CORBA、 Sun 的 RMI / EJB、 Microsoft 的 DCOM 等。OMG 提出的对象请求代理(Object Request Broker,ORB) 模型提供了一个通信框架，可以在异构分布计算环境中透明地传递对象请求。ORB 是一种对象总线，定义了异构环境下对象透明地发送请求和接受响应的基本机制，是建立对象之间客户机/ 服务器关系的中间件。

> ORB 使得对象可以透明地向其他对象发出请求或接受其他对象的响应，这些对象可以位于本地机器也可以位于远程机器。ORB 拦截请求调用，并负责找到可以实现请求的对象、传送参数、调用相应的方法、返回结果等。

----

> 事务中间件<br>
事务中间件也称事务处理监控器(Transcation Processing Monitor，TPM)最早出现在大型机上,为其提供支持大规模事务处理的可靠运行环境。

> 事务处理监控程序位于客户和服务器之间，完成事务管理与协调、负载平衡、失效恢复等任务，以提高系统的整体性能。

>随着对象技术与事务技术的结合,今年还出现了一类新产品，即对象事务监控器(Object Transcation Moinitor,OTM),可以保证分布式对象的事务完整性,支持 EJB 的 JEE 应用服务器就属于该类产品。

> 事务处理监控器在操作系统之上提供了一组服务,可以对客户请求进行管理并为其分配相应的服务进程,使服务器在有限的系统资源下能够高效地为大量客户提供服务。
